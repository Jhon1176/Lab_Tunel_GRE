name: lab-tunel-gre

topology:
  nodes:
    router1:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.12.1
      mgmt-ipv4: 172.20.20.2
      startup-config: R1.partial

    router2:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.12.1
      mgmt-ipv4: 172.20.20.3
      startup-config: R2.partial

    router3:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.12.1
      mgmt-ipv4: 172.20.20.4
      startup-config: R3.partial

    router4:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.12.1
      mgmt-ipv4: 172.20.20.5
      startup-config: R4.partial

    router5:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.12.1
      mgmt-ipv4: 172.20.20.6
      startup-config: R5.partial

    router6:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.12.1
      mgmt-ipv4: 172.20.20.7
      startup-config: R6.partial

    router7:
      kind: cisco_iol
      image: vrnetlab/cisco_iol:17.12.1
      mgmt-ipv4: 172.20.20.8
      startup-config: R7.partial

    PC1:
      kind: linux
      image: mi-pc-ssh:latest
      exec:
        - ip addr 192.168.20.100/24 dev eth1
        - ip route default via 192.168.20.1

    PC2:
      kind: linux
      image: mi-pc-ssh:latest
      exec:
        - ip addr 192.168.0.100/24 dev eth1
        - ip route default via 192.168.0.1

  links:
    - endpoints: [ "router1:Ethernet0/1", "router2:Ethernet0/1" ]
    - endpoints: [ "router2:Ethernet0/2", "router3:Ethernet0/1" ]
    - endpoints: [ "router4:Ethernet0/1", router3:Ethernet0/2 ]
    - endpoints: [ "router4:Ethernet0/2", router5:Ethernet0/1 ]
    - endpoints: [ "router5:Ethernet0/2", router6:Ethernet0/1 ]
    - endpoints: [ "router6:Ethernet0/2", router7:Ethernet0/1 ]
    - endpoints: [ "router1:Ethernet0/2", "PC1:eth1" ]
    - endpoints: [ "router7:Ethernet0/2", "PC2:eth1" ]
